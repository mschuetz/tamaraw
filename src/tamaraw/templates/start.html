{% extends "layout.html" %}
{% block body %}
<div id="subscribeDialog" class="modal hide fade">
	<div class="modal-header">
		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">
			&times;
		</button>
		<h3>In den Emailverteiler eintragen</h3>
	</div>
	<form action="{{url_for('subscribe')}}" method="post">
		<div class="modal-body">
			<p>
				<input class="span6" type="text" placeholder="Name" name="real_name"/>
				<input class="span6 hide" type="text" placeholder="Name" name="name"/>
			</p>
			<p>
				<input class="span6" type="email" placeholder="Email" name="email"/>
			</p>
			<p>
				<textarea class="span6" type="text" placeholder="Kommentar (optional)" name="comment" rows="10"></textarea>
			</p>
		</div>
		<div class="modal-footer">
			<button class="btn" type="submit">
				Absenden
			</button>
			<small><a href="/imprint#privacy">Datenschutzerklärung</a></small>
		</div>
	</form>
</div>


<div class="container-fluid">
<div class="row">
    <div class="jumbotron">
        <h2>Willkommen beim Bilderarchiv Rinderanspannung!</h2>

        <div class="container-fluid">
            <div class="row">
                <div class="col-md-6">
                    <p>
                        Wenn Sie an historischer Rinderanspannung interessiert sind und über Fortschritte beim Ausbau
                        der Datenbank informiert werden möchten, besteht die Möglichkeit, sich in unseren Emailverteiler
                        einzutragen.
                    </p>

                    <p>
                        <a class="btn btn-default" data-toggle="modal" href="#subscribeDialog">In den Emailverteiler eintragen</a>
                        <a class="btn btn-primary" href="/about"> Erfahren Sie mehr » </a>
                    </p>
                </div>
                <div class="col-md-6">
                    <div id="carousel" class="carousel slide" data-ride="carousel">
                        <!-- Indicators -->
                        <ol class="carousel-indicators">
                            {% for image in demo_images %}
                                <li data-target="#carousel" data-slide-to="{{ loop.index0 }}" class="{%if loop.first%} active {%endif%}"></li>
                            {% endfor %}
                        </ol>
                        <!-- Wrapper for slides -->
                        <div class="carousel-inner">
                            {% for image in demo_images %}
                            <div class="item {%if loop.first%} active {%endif%}">
                                <img id="carousel-img-{{loop.index0}}" src="{{ url_for('get_image', store_key=image.store_key, x=640, y=480) }}" alt="">
                                <div class="carousel-caption">
                                    <h5><a class="regular-text" href="{{url_for('image_page', store_key=image.store_key)}}">{{image.prop_title}}</a></h5>
                                    <p><small style="font-size: 50%">Bildrechte: {{image.prop_rights}}</small></p>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                        <!-- Controls -->
                        <a class="left carousel-control" href="#carousel" role="button"
                           data-slide="prev">
                            <span class="glyphicon glyphicon-chevron-left"></span>
                        </a>
                        <a class="right carousel-control" href="#carousel" role="button"
                           data-slide="next">
                            <span class="glyphicon glyphicon-chevron-right"></span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</div>
<script type="application/javascript">
    var carousel_image_width = 640;
    function window_width() {
        var ratio = window.devicePixelRatio;
        if ($.isNumeric(ratio) && ratio > 1) {
            console.log("detected hidpi display with ratio=" + ratio);
            return $(window).width() * ratio;
        }
        return $(window).width();
    }

    function resize_carousel_images() {
        var new_width = Math.ceil(window_width() / 2 / 300) * 320;
        if (new_width == carousel_image_width) {
            return;
        }
        carousel_image_width = new_width;
        var new_height = Math.ceil(new_width * 0.75);
        {% for image in demo_images %}
            $('#carousel-img-{{loop.index0}}')[0].src="{{ url_for('get_image', store_key=image.store_key, x='999', y='888') }}".replace('999', new_width).replace('888', new_height);
        {% endfor %}
    }
    resize_carousel_images();
    $(window).resize(resize_carousel_images);
</script>

</div>
{% endblock %}
